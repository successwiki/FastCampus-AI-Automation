{
  "name": "ì´ë©”ì¼ ìë™í™”",
  "nodes": [
    {
      "parameters": {
        "operation": "get",
        "messageId": "={{ $('Gmail Trigger').item.json.id }}",
        "simple": false,
        "options": {}
      },
      "id": "bf88423e-35fa-4f4b-a831-ef948a52a8fe",
      "name": "Get Email Details",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        680,
        -80
      ],
      "notesInFlow": true,
      "webhookId": "3a52d4f4-e056-4ab2-b09e-a1afbe48e797",
      "credentials": {
        "gmailOAuth2": {
          "id": "FpAOSM1d6pRwc8pe",
          "name": "Gmail account"
        }
      },
      "notes": "ğŸ”µ 2ê°•: ì´ë©”ì¼ ì „ì²´ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\nì¶œë ¥: payload, headers, body"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// ì‹¤ì œ ì´ë©”ì¼ ë°ì´í„° êµ¬ì¡°ì— ë§ì¶˜ ì •ì œ ì½”ë“œ\nconst emailData = $input.item.json;\n\n// HTML íƒœê·¸ ì œê±° ë° í…ìŠ¤íŠ¸ ì •ì œ í•¨ìˆ˜\nfunction cleanText(content) {\n  if (!content) return '';\n  \n  let cleaned = content;\n  \n  // HTML ì—”í‹°í‹° ë””ì½”ë”©\n  cleaned = cleaned\n    .replace(/&#x([0-9A-F]+);/gi, (match, hex) => String.fromCharCode(parseInt(hex, 16)))\n    .replace(/&#([0-9]+);/g, (match, dec) => String.fromCharCode(parseInt(dec, 10)))\n    .replace(/&nbsp;/g, ' ')\n    .replace(/&amp;/g, '&')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&quot;/g, '\"')\n    .replace(/&#39;/g, \"'\")\n    .replace(/&apos;/g, \"'\");\n  \n  // HTML íƒœê·¸ ì œê±°\n  cleaned = cleaned.replace(/<[^>]*>/g, '');\n  \n  // ì—°ì†ëœ ê³µë°±ì„ í•˜ë‚˜ë¡œ\n  cleaned = cleaned.replace(/\\s+/g, ' ');\n  \n  // ì—°ì†ëœ ì¤„ë°”ê¿ˆì„ ìµœëŒ€ 2ê°œë¡œ ì œí•œ\n  cleaned = cleaned.replace(/\\n\\s*\\n\\s*\\n+/g, '\\n\\n');\n  \n  // ì•ë’¤ ê³µë°± ì œê±°\n  cleaned = cleaned.trim();\n  \n  return cleaned;\n}\n\n// URL ì¶”ì¶œ í•¨ìˆ˜\nfunction extractUrls(text) {\n  if (!text) return [];\n  const urlRegex = /https?:\\/\\/[^\\s<>\"]+/gi;\n  return text.match(urlRegex) || [];\n}\n\n// ì´ë©”ì¼ ì£¼ì†Œ ì •ì œ\nfunction parseEmailInfo(emailObj) {\n  if (!emailObj || !emailObj.value || !emailObj.value[0]) {\n    return { email: '', name: '', domain: '' };\n  }\n  \n  const emailInfo = emailObj.value[0];\n  const email = emailInfo.address || '';\n  const name = emailInfo.name || '';\n  const domain = email.split('@')[1] || '';\n  \n  return { email, name, domain };\n}\n\n// ì œëª© ì •ì œ (Base64 ë””ì½”ë”©ëœ ìƒíƒœ)\nconst subject = cleanText(emailData.subject || '');\nconst subjectClean = subject.replace(/^(RE:|FW:|ë‹µë³€:|ì „ë‹¬:|Re:|Fwd:)\\s*/i, '');\n\n// ë°œì‹ ì/ìˆ˜ì‹ ì ì •ë³´ íŒŒì‹±\nconst fromInfo = parseEmailInfo(emailData.from);\nconst toInfo = parseEmailInfo(emailData.to);\n\n// ë³¸ë¬¸ ë‚´ìš© ì •ì œ (text ìš°ì„ , ì—†ìœ¼ë©´ textAsHtml)\nlet bodyContent = '';\nif (emailData.text) {\n  bodyContent = cleanText(emailData.text);\n} else if (emailData.textAsHtml) {\n  bodyContent = cleanText(emailData.textAsHtml);\n} else if (emailData.html) {\n  bodyContent = cleanText(emailData.html);\n}\n\n// [image: xxx] ê°™ì€ í…ìŠ¤íŠ¸ ì œê±°\nbodyContent = bodyContent.replace(/\\[image:\\s*[^\\]]*\\]/gi, '');\n\n// ë§í¬ URLë“¤ë§Œ ë‚¨ê¸°ê³  < > ì œê±°\nbodyContent = bodyContent.replace(/<(https?:\\/\\/[^>]+)>/g, '$1');\n\n// ë‚ ì§œ íŒŒì‹±\nlet parsedDate = '';\nlet timestamp = '';\nif (emailData.date) {\n  try {\n    const date = new Date(emailData.date);\n    parsedDate = date.toLocaleString('ko-KR', {\n      year: 'numeric',\n      month: '2-digit', \n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n    timestamp = date.toISOString();\n  } catch (e) {\n    parsedDate = emailData.date;\n    timestamp = new Date().toISOString();\n  }\n}\n\n// URL ì¶”ì¶œ\nconst urls = extractUrls(bodyContent);\n\n// í‚¤ì›Œë“œ ì¶”ì¶œ (3ê¸€ì ì´ìƒ í•œê¸€, ì˜ë¬¸ ë‹¨ì–´)\nconst keywords = [];\nif (bodyContent) {\n  const words = bodyContent.match(/[ê°€-í£]{2,}|[a-zA-Z]{3,}/g) || [];\n  const wordCount = {};\n  \n  words.forEach(word => {\n    const lower = word.toLowerCase();\n    if (lower.length > 2 && !/^(the|and|for|are|but|not|you|all|can|had|her|was|one|our|out|day|get|has|him|his|how|its|may|new|now|old|see|two|way|who|boy|did|man|end|say|she|use|each|make|most|over|said|some|time|very|what|with|have|from|they|know|want|been|good|much|some|time|will|year|your|when|come|could|there|first|after|back|other|great|take|before)$/.test(lower)) {\n      wordCount[lower] = (wordCount[lower] || 0) + 1;\n    }\n  });\n  \n  keywords.push(...Object.entries(wordCount)\n    .sort(([,a], [,b]) => b - a)\n    .slice(0, 5)\n    .map(([word]) => word));\n}\n\n// ì´ë©”ì¼ ìœ í˜• íŒë‹¨\nlet emailType = 'general';\nif (fromInfo.domain.includes('google.com') || fromInfo.domain.includes('accounts.google')) {\n  emailType = 'google_security';\n} else if (bodyContent.includes('ì•Œë¦¼') || bodyContent.includes('notification')) {\n  emailType = 'notification';\n} else if (bodyContent.includes('ê´‘ê³ ') || bodyContent.includes('ë§ˆì¼€íŒ…') || bodyContent.includes('unsubscribe')) {\n  emailType = 'marketing';\n}\n\n// ë³´ì•ˆ ê´€ë ¨ í‚¤ì›Œë“œ ì²´í¬\nconst securityKeywords = ['ë³´ì•ˆ', 'ì•¡ì„¸ìŠ¤', 'ë¡œê·¸ì¸', 'ê³„ì •', 'ê¶Œí•œ', 'í™œë™', 'í™•ì¸', 'security', 'access', 'login', 'account'];\nconst isSecurityRelated = securityKeywords.some(keyword => \n  subject.toLowerCase().includes(keyword) || bodyContent.toLowerCase().includes(keyword)\n);\n\n// ë‚´ìš© ìš”ì•½ ìƒì„±\nconst contentSummary = bodyContent.length > 150 \n  ? bodyContent.substring(0, 150) + '...' \n  : bodyContent;\n\n// ì •ì œëœ ìµœì¢… ë°ì´í„° ë°˜í™˜\nreturn {\n  // === ê¸°ë³¸ ì‹ë³„ ì •ë³´ ===\n  messageId: emailData.messageId || emailData.id || '',\n  threadId: emailData.threadId || '',\n  \n  // === ì •ì œëœ ì œëª© ===\n  subject: subject,\n  subjectClean: subjectClean,\n  \n  // === ë°œì‹ ì ì •ë³´ ===\n  senderEmail: fromInfo.email,\n  senderName: fromInfo.name || fromInfo.email,\n  senderDomain: fromInfo.domain,\n  \n  // === ìˆ˜ì‹ ì ì •ë³´ ===\n  recipientEmail: toInfo.email,\n  recipientName: toInfo.name || toInfo.email,\n  \n  // === ë‚ ì§œ ì •ë³´ ===\n  date: parsedDate,\n  dateISO: timestamp,\n  dateOriginal: emailData.date,\n  \n  // === ì •ì œëœ ë‚´ìš© ===\n  content: bodyContent,\n  contentSummary: contentSummary,\n  contentLength: bodyContent.length,\n  \n  // === ì¶”ì¶œëœ ì •ë³´ ===\n  urls: urls,\n  urlCount: urls.length,\n  keywords: keywords,\n  \n  // === ë¶„ë¥˜ ì •ë³´ ===\n  emailType: emailType,\n  isSecurityRelated: isSecurityRelated,\n  hasLinks: urls.length > 0,\n  \n  // === ë©”íƒ€ë°ì´í„° ===\n  sizeEstimate: emailData.sizeEstimate || 0,\n  hasHtml: !!emailData.html,\n  hasText: !!emailData.text,\n  \n  // === ì›ë³¸ ë°ì´í„° (í•„ìš”ì‹œ) ===\n  _rawSubject: emailData.subject,\n  _rawHeaders: emailData.headers,\n  _processedAt: new Date().toISOString()\n};"
      },
      "id": "f3bc1f30-2f16-4748-9cfa-39a36768c85f",
      "name": "Parse Email Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        960,
        -80
      ],
      "notesInFlow": true,
      "notes": "ğŸŸ¡ ì´ë©”ì¼ ë°ì´í„° ì •ì œ\nì¶œë ¥:\n- messageId\n- threadId\n- subject\n- from\n- senderEmail\n- senderName\n- body (ë””ì½”ë”©ë¨)\n- date\n- labels"
    },
    {
      "parameters": {
        "content": "## ğŸ“Š ì´ë©”ì¼ ë¶„ì„ íŒŒì´í”„ë¼ì¸\n\n1. **Gmail Trigger**: ìƒˆ ì´ë©”ì¼ IDë§Œ ì œê³µ\n2. **Get Email Details**: ì „ì²´ ì´ë©”ì¼ ë°ì´í„° ê°€ì ¸ì˜´\n3. **Parse Email Data**: í—¤ë”ì™€ ë³¸ë¬¸ì„ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”\n4. **AI Agent**: íŒŒì‹±ëœ ë°ì´í„°ë¥¼ ë¶„ì„",
        "height": 180,
        "width": 400,
        "color": 4
      },
      "id": "d58e13c1-5d20-4081-a542-55a3bfce3f9e",
      "name": "Sticky Note - Data Flow",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        380,
        -380
      ]
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.3
        }
      },
      "id": "17643d24-3eaa-41ea-8614-37fbca23eb9a",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        1160,
        200
      ],
      "credentials": {
        "openAiApi": {
          "id": "i2ko7n62147IgBPO",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "==== ì´ë©”ì¼ ë¶„ì„ ì‘ì—… ===\n\në‹¤ìŒ ì´ë©”ì¼ì„ ë¶„ì„í•˜ê³  JSON í˜•ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.\n\n**ì´ë©”ì¼ ì •ë³´:**\n- ë°œì‹ ì: {{ $('Parse Email Data').item.json.senderName }} ({{ $('Parse Email Data').item.json.senderEmail }})\n- ìˆ˜ì‹ ì: {{ $('Parse Email Data').item.json.recipientEmail }}\n- ì œëª©: {{ $('Parse Email Data').item.json.subject }}\n- ì •ì œëœ ì œëª©: {{ $('Parse Email Data').item.json.subjectClean }}\n- ë‚ ì§œ: {{ $('Parse Email Data').item.json.date }}\n- ì´ë©”ì¼ ìœ í˜•: {{ $('Parse Email Data').item.json.emailType }}\n- ë³´ì•ˆ ê´€ë ¨: {{ $('Parse Email Data').item.json.isSecurityRelated }}\n\n**ë³¸ë¬¸ ë‚´ìš©:**\n{{ $('Parse Email Data').item.json.content }}\n\n**ìš”ì•½:**\n{{ $('Parse Email Data').item.json.contentSummary }}\n\n**ì¶”ì¶œëœ í‚¤ì›Œë“œ:**\n{{ $('Parse Email Data').item.json.keywords }}\n\n**í¬í•¨ëœ URL:**\n{{ $('Parse Email Data').item.json.urls }}\n\n---\n\n**ë¶„ì„ í•­ëª©:**\n\n1. **ì˜ë„** (ì´ë©”ì¼ ì˜ë„)\n   - ë¬¸ì˜: ì¼ë°˜ ë¬¸ì˜/ì§ˆë¬¸\n   - ë¶ˆë§Œ: ë¶ˆë§Œ/ì»´í”Œë ˆì¸\n   - ìš”ì²­: ìš”ì²­ì‚¬í•­/ë¶€íƒ\n   - ì •ë³´ê³µìœ : ì •ë³´ ê³µìœ /ì•Œë¦¼\n   - í”¼ë“œë°±: í”¼ë“œë°±/ì˜ê²¬\n   - ë³´ì•ˆ: ë³´ì•ˆ ê´€ë ¨ ì•Œë¦¼\n   - ë§ˆì¼€íŒ…: ë§ˆì¼€íŒ…/ê´‘ê³ \n   \n2. **ê¸´ê¸‰ë„** (ì²˜ë¦¬ ê¸´ê¸‰ë„)\n   - ë†’ìŒ: ì¦‰ì‹œ ì²˜ë¦¬ í•„ìš” (24ì‹œê°„ ì´ë‚´)\n   - ë³´í†µ: ë¹ ë¥¸ ì²˜ë¦¬ í•„ìš” (3ì¼ ì´ë‚´)\n   - ë‚®ìŒ: ì¼ë°˜ ì²˜ë¦¬ (1ì£¼ì¼ ì´ë‚´)\n   \n3. **ê°ì •** (ê°ì • ë¶„ì„)\n   - ê¸ì •ì : ê¸ì •ì /ìš°í˜¸ì \n   - ì¤‘ë¦½ì : ì¤‘ë¦½ì /ì‚¬ì‹¤ì \n   - ë¶€ì •ì : ë¶€ì •ì /ë¶ˆë§Œì¡±\n   \n4. **ì¹´í…Œê³ ë¦¬** (ì—…ë¬´ ì¹´í…Œê³ ë¦¬)\n   - ê³ ê°ì§€ì›: ê³ ê°ì§€ì›\n   - ì˜ì—…: ì˜ì—…/êµ¬ë§¤ë¬¸ì˜\n   - ê¸°ìˆ ì§€ì›: ê¸°ìˆ ì§€ì›\n   - ë³´ì•ˆ: ë³´ì•ˆ/ê³„ì •\n   - ë§ˆì¼€íŒ…: ë§ˆì¼€íŒ…/í™ë³´\n   - ë‚´ë¶€ì—…ë¬´: ë‚´ë¶€ì—…ë¬´\n   - ì¼ë°˜ë¬¸ì˜: ì¼ë°˜ë¬¸ì˜\n   \n5. **ìš°ì„ ìˆœìœ„** (ìš°ì„ ìˆœìœ„)\n   - ê¸´ê¸‰: ê¸´ê¸‰ ëŒ€ì‘ í•„ìš”\n   - ë†’ìŒ: ë†’ìŒ\n   - ë³´í†µ: ë³´í†µ\n   - ë‚®ìŒ: ë‚®ìŒ\n   \n6. **í‚¤ì›Œë“œ** (ì£¼ìš” í‚¤ì›Œë“œ)\n   - ì´ë©”ì¼ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ í‚¤ì›Œë“œ 3-5ê°œë¥¼ ë°°ì—´ë¡œ\n   \n7. **ë‹µì¥í•„ìš”** (ë‹µì¥ í•„ìš” ì—¬ë¶€ íŒë‹¨)\n   ë‹¤ìŒ ê¸°ì¤€ì— ë”°ë¼ true/falseë¡œ íŒë‹¨í•˜ì„¸ìš”:\n   \n   **ë‹µì¥ì´ í•„ìš”í•œ ê²½ìš° (true):**\n   - ì§ˆë¬¸ì´ë‚˜ ë¬¸ì˜ê°€ í¬í•¨ëœ ê²½ìš°\n   - ìš”ì²­ì‚¬í•­ì´ë‚˜ ë¶€íƒì´ ìˆëŠ” ê²½ìš°\n   - ë¶ˆë§Œì´ë‚˜ ë¬¸ì œ í•´ê²°ì´ í•„ìš”í•œ ê²½ìš°\n   - í™•ì¸ì´ë‚˜ ìŠ¹ì¸ì„ ìš”êµ¬í•˜ëŠ” ê²½ìš°\n   - í”¼ë“œë°±ì´ë‚˜ ì˜ê²¬ì„ êµ¬í•˜ëŠ” ê²½ìš°\n   - ê°œì¸ì ì¸ ë°œì‹ ì(no-replyê°€ ì•„ë‹Œ)ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼\n   - ê³ ê°ì§€ì›, ì˜ì—…, ê¸°ìˆ ì§€ì› ê´€ë ¨ ë¬¸ì˜\n   \n   **ë‹µì¥ì´ ë¶ˆí•„ìš”í•œ ê²½ìš° (false):**\n   - ë‹¨ìˆœ ì •ë³´ ì•Œë¦¼ì´ë‚˜ ê³µì§€ì‚¬í•­\n   - ì‹œìŠ¤í…œ ìë™ ìƒì„± ì´ë©”ì¼ (no-reply ì£¼ì†Œ)\n   - ë§ˆì¼€íŒ…/ê´‘ê³ ì„± ì´ë©”ì¼\n   - ë‰´ìŠ¤ë ˆí„°ë‚˜ ì—…ë°ì´íŠ¸ ì•Œë¦¼\n   - ë³´ì•ˆ ì•Œë¦¼ ì¤‘ ë‹¨ìˆœ ì •ë³´ ì œê³µìš©\n   - ë°°ì†¡ ì•Œë¦¼, ê²°ì œ í™•ì¸ ë“± íŠ¸ëœì­ì…˜ ì•Œë¦¼\n   - ë°œì‹ ìê°€ \"no-reply\", \"noreply\", \"donotreply\" ë“±ì¸ ê²½ìš°\n   \n8. **ì¡°ì¹˜ì‚¬í•­** (í•„ìš”í•œ ì¡°ì¹˜ì‚¬í•­)\n   - êµ¬ì²´ì ì¸ ì•¡ì…˜ ì•„ì´í…œë“¤ì„ ë°°ì—´ë¡œ (ìµœëŒ€ 3ê°œ)\n   - ì˜ˆ: [\"ê³„ì • ë³´ì•ˆ í™•ì¸\", \"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½\", \"ê³ ê°ì„¼í„° ì—°ë½\"]\n   \n9. **ìš”ì•½** (í•µì‹¬ ìš”ì•½)\n   - ì´ë©”ì¼ì˜ í•µì‹¬ ë‚´ìš©ì„ 1-2ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½\n   \n10. **ìœ„í—˜ë„** (ìœ„í—˜ë„ í‰ê°€)\n    - ë†’ìŒ: ë³´ì•ˆ ìœ„í˜‘, ê¸´ê¸‰ ë¬¸ì œ\n    - ë³´í†µ: ì¼ë°˜ì ì¸ ì´ìŠˆ\n    - ë‚®ìŒ: ë‹¨ìˆœ ì •ë³´\n\n**ì¶œë ¥ í˜•ì‹:**\n```json\n{\n  \"ì˜ë„\": \"string\",\n  \"ê¸´ê¸‰ë„\": \"string\", \n  \"ê°ì •\": \"string\",\n  \"ì¹´í…Œê³ ë¦¬\": \"string\",\n  \"ìš°ì„ ìˆœìœ„\": \"string\",\n  \"í‚¤ì›Œë“œ\": [\"í‚¤ì›Œë“œ1\", \"í‚¤ì›Œë“œ2\", \"í‚¤ì›Œë“œ3\"],\n  \"ë‹µì¥í•„ìš”\": boolean,\n  \"ì¡°ì¹˜ì‚¬í•­\": [\"ì¡°ì¹˜1\", \"ì¡°ì¹˜2\", \"ì¡°ì¹˜3\"],\n  \"ìš”ì•½\": \"string\",\n  \"ìœ„í—˜ë„\": \"string\"\n}\n```\n\n**ì¤‘ìš” ì§€ì¹¨:**\n1. ë°œì‹ ì ì´ë©”ì¼ ì£¼ì†Œë¥¼ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”. \"no-reply\", \"noreply\", \"donotreply\" ë“±ì´ í¬í•¨ëœ ì£¼ì†ŒëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹µì¥ì´ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.\n2. ì´ë©”ì¼ì˜ ì‹¤ì œ ëª©ì ê³¼ ë‚´ìš©ì„ ì •í™•íˆ íŒŒì•…í•˜ì—¬ ë¶„ë¥˜í•˜ì„¸ìš”.\n3. í•œêµ­ì–´ì™€ ì˜ì–´ë¥¼ ëª¨ë‘ ì •í™•íˆ ë¶„ì„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n4. ê°ì • ë¶„ì„ ì‹œ ë¬¸ë§¥ì„ ì •í™•íˆ íŒŒì•…í•˜ê³ , ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ëŠ” ì´ë©”ì¼ì˜ ì£¼ìš” ëª©ì ì— ë”°ë¼ ê²°ì •í•˜ì„¸ìš”.\n5. JSONë§Œ ë°˜í™˜í•˜ê³  ë‹¤ë¥¸ ì„¤ëª…ì´ë‚˜ ë§ˆí¬ë‹¤ìš´ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.\n",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ì „ë¬¸ì ì¸ ì´ë©”ì¼ ë¶„ì„ AI ë¹„ì„œì…ë‹ˆë‹¤. ì´ë©”ì¼ì˜ ë‚´ìš©ì„ ì •í™•íˆ ë¶„ì„í•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì ì—ì„œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. í•­ìƒ ì§€ì •ëœ JSON ìŠ¤í‚¤ë§ˆì— ë§ì¶° êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì œê³µí•˜ì„¸ìš”. ê°ì • ë¶„ì„ ì‹œ ë¬¸ë§¥ì„ ì •í™•íˆ íŒŒì•…í•˜ê³ , ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ëŠ” ì´ë©”ì¼ì˜ ì£¼ìš” ëª©ì ì— ë”°ë¼ ê²°ì •í•˜ì„¸ìš”. í•œêµ­ì–´ì™€ ì˜ì–´ë¥¼ ëª¨ë‘ ì •í™•íˆ ë¶„ì„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤."
        }
      },
      "id": "43771080-1f97-48e6-b537-8f9e08b0c309",
      "name": "AI Email Analyzer",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        1180,
        -80
      ],
      "notesInFlow": true,
      "notes": "ğŸ”´ AI ì´ë©”ì¼ ë¶„ì„\nì¶œë ¥ JSON:\n- intent\n- urgency\n- sentiment\n- category\n- keywords[]\n- requiresReply\n- summary"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"ì˜ë„\": {\n      \"type\": \"string\",\n      \"enum\": [\"ë¬¸ì˜\", \"ë¶ˆë§Œ\", \"ìš”ì²­\", \"ì •ë³´ê³µìœ \", \"í”¼ë“œë°±\", \"ë³´ì•ˆ\", \"ë§ˆì¼€íŒ…\"],\n      \"description\": \"ì´ë©”ì¼ì˜ ì£¼ìš” ì˜ë„\"\n    },\n    \"ê¸´ê¸‰ë„\": {\n      \"type\": \"string\",\n      \"enum\": [\"ë†’ìŒ\", \"ë³´í†µ\", \"ë‚®ìŒ\"],\n      \"description\": \"ì²˜ë¦¬ ê¸´ê¸‰ë„\"\n    },\n    \"ê°ì •\": {\n      \"type\": \"string\",\n      \"enum\": [\"ê¸ì •ì \", \"ì¤‘ë¦½ì \", \"ë¶€ì •ì \"],\n      \"description\": \"ì´ë©”ì¼ì˜ ê°ì • í†¤\"\n    },\n    \"ì¹´í…Œê³ ë¦¬\": {\n      \"type\": \"string\",\n      \"enum\": [\"ê³ ê°ì§€ì›\", \"ì˜ì—…\", \"ê¸°ìˆ ì§€ì›\", \"ë³´ì•ˆ\", \"ë§ˆì¼€íŒ…\", \"ë‚´ë¶€ì—…ë¬´\", \"ì¼ë°˜ë¬¸ì˜\"],\n      \"description\": \"ì—…ë¬´ ì¹´í…Œê³ ë¦¬\"\n    },\n    \"ìš°ì„ ìˆœìœ„\": {\n      \"type\": \"string\",\n      \"enum\": [\"ê¸´ê¸‰\", \"ë†’ìŒ\", \"ë³´í†µ\", \"ë‚®ìŒ\"],\n      \"description\": \"ìš°ì„ ìˆœìœ„\"\n    },\n    \"í‚¤ì›Œë“œ\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"minItems\": 3,\n      \"maxItems\": 5,\n      \"description\": \"ì£¼ìš” í‚¤ì›Œë“œ 3-5ê°œ\"\n    },\n    \"ë‹µì¥í•„ìš”\": {\n      \"type\": \"boolean\",\n      \"description\": \"ë‹µì¥ í•„ìš” ì—¬ë¶€\"\n    },\n    \"ì¡°ì¹˜ì‚¬í•­\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"maxItems\": 3,\n      \"description\": \"í•„ìš”í•œ ì¡°ì¹˜ì‚¬í•­\"\n    },\n    \"ìš”ì•½\": {\n      \"type\": \"string\",\n      \"description\": \"ì´ë©”ì¼ í•µì‹¬ ìš”ì•½\"\n    },\n    \"ìœ„í—˜ë„\": {\n      \"type\": \"string\",\n      \"enum\": [\"ë†’ìŒ\", \"ë³´í†µ\", \"ë‚®ìŒ\"],\n      \"description\": \"ìœ„í—˜ë„ í‰ê°€\"\n    }\n  },\n  \"required\": [\"ì˜ë„\", \"ê¸´ê¸‰ë„\", \"ê°ì •\", \"ì¹´í…Œê³ ë¦¬\", \"ìš°ì„ ìˆœìœ„\", \"í‚¤ì›Œë“œ\", \"ë‹µì¥í•„ìš”\", \"ì¡°ì¹˜ì‚¬í•­\", \"ìš”ì•½\", \"ìœ„í—˜ë„\"]\n}"
      },
      "id": "3ef33897-da8e-4f2c-aa13-d0b471db9478",
      "name": "JSON Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        1400,
        180
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// ì´ì „ ë…¸ë“œë“¤ì˜ ë°ì´í„° í†µí•© (í•œê¸€ í•„ë“œëª… ì‚¬ìš©)\nconst emailData = $('Parse Email Data').item.json;\nconst analysisData = $('AI Email Analyzer').item.json.output;\n\n// ì‚¬ìš© ê°€ëŠ¥í•œ í†¤ ëª©ë¡ ì •ì˜ (Airtableì— ì‹¤ì œ ì¡´ì¬í•˜ëŠ” í†¤ë“¤)\nconst availableTones = [\n  'ì •ë³´ì œê³µí˜•', 'ê³µê°í˜•', 'ì—´ì •ì ', 'ì „ë¬¸ê°€í˜•', 'ìºì£¼ì–¼', \n  'ì „ë¬¸ì ', 'ê°ì‚¬í˜•', 'ë„ì›€í˜•', 'ì»¨ì„¤íŒ…í˜•', 'ë§¤ë ¥ì '\n];\n\n// ì¹´í…Œê³ ë¦¬ë³„ ê¸°ë³¸ í†¤ ë§¤í•‘ (í´ë°±ìš©)\nconst defaultToneByCategory = {\n  'ë³´ì•ˆ': 'ì •ë³´ì œê³µí˜•',\n  'ê³ ê°ì§€ì›': 'ë„ì›€í˜•', \n  'ì˜ì—…': 'ì „ë¬¸ì ',\n  'ê¸°ìˆ ì§€ì›': 'ì „ë¬¸ê°€í˜•',\n  'ë§ˆì¼€íŒ…': 'ë§¤ë ¥ì ',\n  'ë‚´ë¶€ì—…ë¬´': 'ì „ë¬¸ì ',\n  'ì¼ë°˜ë¬¸ì˜': 'ì „ë¬¸ì '\n};\n\n// ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ + í†¤ ì¡°í•© (Airtable ê¸°ì¤€)\nconst existingCombinations = [\n  'ë³´ì•ˆ_ì •ë³´ì œê³µí˜•', 'ë³´ì•ˆ_ì „ë¬¸ì ',\n  'ê³ ê°ì§€ì›_ê³µê°í˜•', 'ê³ ê°ì§€ì›_ê°ì‚¬í˜•', 'ê³ ê°ì§€ì›_ë„ì›€í˜•', 'ê³ ê°ì§€ì›_ì „ë¬¸ì ',\n  'ì˜ì—…_ì—´ì •ì ', 'ì˜ì—…_ì»¨ì„¤íŒ…í˜•', 'ì˜ì—…_ì „ë¬¸ì ', 'ì˜ì—…_ê°ì‚¬í˜•',\n  'ê¸°ìˆ ì§€ì›_ì „ë¬¸ê°€í˜•', 'ê¸°ìˆ ì§€ì›_ë„ì›€í˜•', 'ê¸°ìˆ ì§€ì›_ì •ë³´ì œê³µí˜•',\n  'ë§ˆì¼€íŒ…_ë§¤ë ¥ì ', 'ë§ˆì¼€íŒ…_ì „ë¬¸ì ',\n  'ë‚´ë¶€ì—…ë¬´_ìºì£¼ì–¼', 'ë‚´ë¶€ì—…ë¬´_ì „ë¬¸ì ',\n  'ì¼ë°˜ë¬¸ì˜_ì „ë¬¸ì ', 'ì¼ë°˜ë¬¸ì˜_ë„ì›€í˜•'\n];\n\n// ì¹´í…Œê³ ë¦¬ì™€ ê°ì •ì— ë”°ë¥¸ ë‹µì¥ ì „ëµ ê²°ì •\nlet responseTemplate = '';\nlet tone = '';\nlet responseType = '';\n\n// í…œí”Œë¦¿ ë§¤í•‘ ë¡œì§ (í•œê¸€ ê°’ ê¸°ë°˜)\nif (analysisData.ì¹´í…Œê³ ë¦¬ === 'ê³ ê°ì§€ì›') {\n  if (analysisData.ê°ì • === 'ë¶€ì •ì ') {\n    responseTemplate = 'complaint_response';\n    tone = 'ê³µê°í˜•';\n    responseType = 'apology_and_solution';\n  } else if (analysisData.ê°ì • === 'ê¸ì •ì ') {\n    responseTemplate = 'positive_support_response';\n    tone = 'ê°ì‚¬í˜•';\n    responseType = 'acknowledgment';\n  } else {\n    responseTemplate = 'support_response';\n    tone = 'ë„ì›€í˜•';\n    responseType = 'assistance';\n  }\n} else if (analysisData.ì¹´í…Œê³ ë¦¬ === 'ì˜ì—…') {\n  if (analysisData.ê°ì • === 'ê¸ì •ì ') {\n    responseTemplate = 'sales_follow_up';\n    tone = 'ì—´ì •ì ';\n    responseType = 'engagement';\n  } else {\n    responseTemplate = 'sales_nurture';\n    tone = 'ì»¨ì„¤íŒ…í˜•';\n    responseType = 'education';\n  }\n} else if (analysisData.ì¹´í…Œê³ ë¦¬ === 'ê¸°ìˆ ì§€ì›') {\n  responseTemplate = 'technical_response';\n  tone = 'ì „ë¬¸ê°€í˜•';\n  responseType = 'solution_focused';\n} else if (analysisData.ì¹´í…Œê³ ë¦¬ === 'ë³´ì•ˆ') {\n  responseTemplate = 'security_response';\n  tone = 'ì •ë³´ì œê³µí˜•';\n  responseType = 'guidance';\n} else if (analysisData.ì¹´í…Œê³ ë¦¬ === 'ë§ˆì¼€íŒ…') {\n  responseTemplate = 'marketing_response';\n  tone = 'ë§¤ë ¥ì ';\n  responseType = 'promotional';\n} else if (analysisData.ì¹´í…Œê³ ë¦¬ === 'ë‚´ë¶€ì—…ë¬´') {\n  responseTemplate = 'internal_response';\n  tone = 'ìºì£¼ì–¼';\n  responseType = 'collaborative';\n} else {\n  responseTemplate = 'general_response';\n  tone = 'ì „ë¬¸ì ';\n  responseType = 'standard';\n}\n\n// ===== í´ë°± ë¡œì§ ì¶”ê°€ =====\n\n// 1ë‹¨ê³„: í†¤ì´ ì‚¬ìš© ê°€ëŠ¥í•œ ëª©ë¡ì— ìˆëŠ”ì§€ í™•ì¸\nif (!availableTones.includes(tone)) {\n  console.log(`ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ í†¤: ${tone}, ê¸°ë³¸ í†¤ìœ¼ë¡œ ë³€ê²½`);\n  tone = defaultToneByCategory[analysisData.ì¹´í…Œê³ ë¦¬] || 'ì „ë¬¸ì ';\n}\n\n// 2ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ + í†¤ ì¡°í•©ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\nconst combinationKey = `${analysisData.ì¹´í…Œê³ ë¦¬}_${tone}`;\nif (!existingCombinations.includes(combinationKey)) {\n  console.log(`ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì¡°í•©: ${combinationKey}`);\n  \n  // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ê¸°ë³¸ í†¤ìœ¼ë¡œ ë³€ê²½\n  const fallbackTone = defaultToneByCategory[analysisData.ì¹´í…Œê³ ë¦¬];\n  const fallbackCombination = `${analysisData.ì¹´í…Œê³ ë¦¬}_${fallbackTone}`;\n  \n  if (existingCombinations.includes(fallbackCombination)) {\n    tone = fallbackTone;\n    console.log(`ì¹´í…Œê³ ë¦¬ ê¸°ë³¸ í†¤ìœ¼ë¡œ ë³€ê²½: ${fallbackCombination}`);\n  } else {\n    // ê·¸ë˜ë„ ì—†ìœ¼ë©´ ì™„ì „ ê¸°ë³¸ê°’ ì‚¬ìš©\n    tone = 'ì „ë¬¸ì ';\n    console.log(`ì™„ì „ ê¸°ë³¸ í†¤ìœ¼ë¡œ ë³€ê²½: ì „ë¬¸ì `);\n  }\n}\n\n// 3ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ ìì²´ê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš° ì²˜ë¦¬\nconst supportedCategories = ['ë³´ì•ˆ', 'ê³ ê°ì§€ì›', 'ì˜ì—…', 'ê¸°ìˆ ì§€ì›', 'ë§ˆì¼€íŒ…', 'ë‚´ë¶€ì—…ë¬´', 'ì¼ë°˜ë¬¸ì˜'];\nif (!supportedCategories.includes(analysisData.ì¹´í…Œê³ ë¦¬)) {\n  console.log(`ì§€ì›ë˜ì§€ ì•ŠëŠ” ì¹´í…Œê³ ë¦¬: ${analysisData.ì¹´í…Œê³ ë¦¬}, ì¼ë°˜ë¬¸ì˜ë¡œ ë³€ê²½`);\n  // ì¹´í…Œê³ ë¦¬ë¥¼ ì¼ë°˜ë¬¸ì˜ë¡œ ë³€ê²½í•˜ê³  í†¤ë„ ë§ì¶¤\n  analysisData.ì¹´í…Œê³ ë¦¬ = 'ì¼ë°˜ë¬¸ì˜';\n  tone = 'ì „ë¬¸ì ';\n}\n\n// template_id ìƒì„± (ì¹´í…Œê³ ë¦¬_í†¤_kr í˜•ì‹)\nconst templateId = `${analysisData.ì¹´í…Œê³ ë¦¬}_${tone}_kr`;\n\n// ìµœì¢… í™•ì¸ ë¡œê·¸\nconsole.log(`ìµœì¢… í…œí”Œë¦¿ ì¡°í•©: ${analysisData.ì¹´í…Œê³ ë¦¬}_${tone}`);\nconsole.log(`ìƒì„±ëœ template_id: ${templateId}`);\n\n// ê¸´ê¸‰ë„ì— ë”°ë¥¸ ìš°ì„ ìˆœìœ„ ë§¤í•‘\nlet priorityLevel = '';\nlet responseDeadline = '';\n\nswitch (analysisData.ê¸´ê¸‰ë„) {\n  case 'ë†’ìŒ':\n    priorityLevel = 'ê¸´ê¸‰';\n    responseDeadline = '4ì‹œê°„ ì´ë‚´';\n    break;\n  case 'ë³´í†µ':\n    priorityLevel = 'ë†’ìŒ';\n    responseDeadline = '24ì‹œê°„ ì´ë‚´';\n    break;\n  case 'ë‚®ìŒ':\n    priorityLevel = 'ë³´í†µ';\n    responseDeadline = '3ì¼ ì´ë‚´';\n    break;\n  default:\n    priorityLevel = 'ë³´í†µ';\n    responseDeadline = '3ì¼ ì´ë‚´';\n}\n\n// ìœ„í—˜ë„ì— ë”°ë¥¸ ì¶”ê°€ ì²˜ë¦¬ ë°©ì¹¨\nlet securityAction = 'none';\nlet escalationRequired = false;\n\nif (analysisData.ìœ„í—˜ë„ === 'ë†’ìŒ') {\n  securityAction = 'immediate_review';\n  escalationRequired = true;\n} else if (analysisData.ìœ„í—˜ë„ === 'ë³´í†µ' && analysisData.ì¹´í…Œê³ ë¦¬ === 'ë³´ì•ˆ') {\n  securityAction = 'security_check';\n  escalationRequired = false;\n}\n\n// ìë™ ì‘ë‹µ ì—¬ë¶€ ê²°ì •\nlet autoResponseEligible = false;\nif (analysisData.ì¹´í…Œê³ ë¦¬ === 'ë§ˆì¼€íŒ…' || \n    (analysisData.ì¹´í…Œê³ ë¦¬ === 'ì¼ë°˜ë¬¸ì˜' && analysisData.ê°ì • === 'ì¤‘ë¦½ì ') ||\n    (analysisData.ì¹´í…Œê³ ë¦¬ === 'ë³´ì•ˆ' && !analysisData.ë‹µì¥í•„ìš”)) {\n  autoResponseEligible = true;\n}\n\n// ë‹´ë‹¹ì ë° ë¶€ì„œ í• ë‹¹\nlet assignedDepartment = '';\nlet assignedTeam = '';\nlet estimatedResponseTime = '';\n\nswitch (analysisData.ì¹´í…Œê³ ë¦¬) {\n  case 'ê³ ê°ì§€ì›':\n    assignedDepartment = 'ê³ ê°ì„±ê³µíŒ€';\n    assignedTeam = 'support_team';\n    estimatedResponseTime = analysisData.ê¸´ê¸‰ë„ === 'ë†’ìŒ' ? '2ì‹œê°„' : '24ì‹œê°„';\n    break;\n  case 'ì˜ì—…':\n    assignedDepartment = 'ì˜ì—…íŒ€';\n    assignedTeam = 'sales_team';\n    estimatedResponseTime = analysisData.ê¸´ê¸‰ë„ === 'ë†’ìŒ' ? '4ì‹œê°„' : '48ì‹œê°„';\n    break;\n  case 'ê¸°ìˆ ì§€ì›':\n    assignedDepartment = 'ê°œë°œíŒ€';\n    assignedTeam = 'tech_team';\n    estimatedResponseTime = analysisData.ê¸´ê¸‰ë„ === 'ë†’ìŒ' ? '6ì‹œê°„' : '72ì‹œê°„';\n    break;\n  case 'ë³´ì•ˆ':\n    assignedDepartment = 'ë³´ì•ˆíŒ€';\n    assignedTeam = 'security_team';\n    estimatedResponseTime = '1ì‹œê°„';\n    break;\n  case 'ë§ˆì¼€íŒ…':\n    assignedDepartment = 'ë§ˆì¼€íŒ…íŒ€';\n    assignedTeam = 'marketing_team';\n    estimatedResponseTime = 'ì¼ì£¼ì¼';\n    break;\n  case 'ë‚´ë¶€ì—…ë¬´':\n    assignedDepartment = 'ë‚´ë¶€ìš´ì˜íŒ€';\n    assignedTeam = 'internal_team';\n    estimatedResponseTime = '48ì‹œê°„';\n    break;\n  default:\n    assignedDepartment = 'ì¼ë°˜ì§€ì›íŒ€';\n    assignedTeam = 'general_support';\n    estimatedResponseTime = '24ì‹œê°„';\n}\n\n// í†µí•©ëœ ì „ëµ ë°ì´í„° ë°˜í™˜\nreturn {\n  // === ì´ë©”ì¼ ì›ë³¸ ì •ë³´ (ì •ì œëœ ë°ì´í„°) ===\n  email: {\n    messageId: emailData.messageId,\n    threadId: emailData.threadId,\n    subject: emailData.subject,\n    subjectClean: emailData.subjectClean,\n    senderEmail: emailData.senderEmail,\n    senderName: emailData.senderName,\n    senderDomain: emailData.senderDomain,\n    recipientEmail: emailData.recipientEmail,\n    content: emailData.content,\n    contentSummary: emailData.contentSummary,\n    date: emailData.date,\n    dateISO: emailData.dateISO,\n    urls: emailData.urls,\n    keywords: emailData.keywords,\n    emailType: emailData.emailType,\n    hasLinks: emailData.hasLinks\n  },\n  \n  // === AI ë¶„ì„ ê²°ê³¼ (í•œê¸€ í•„ë“œëª…) ===\n  analysis: {\n    ì˜ë„: analysisData.ì˜ë„,\n    ê¸´ê¸‰ë„: analysisData.ê¸´ê¸‰ë„,\n    ê°ì •: analysisData.ê°ì •,\n    ì¹´í…Œê³ ë¦¬: analysisData.ì¹´í…Œê³ ë¦¬, // í´ë°± ë¡œì§ì—ì„œ ìˆ˜ì •ë  ìˆ˜ ìˆìŒ\n    ìš°ì„ ìˆœìœ„: analysisData.ìš°ì„ ìˆœìœ„,\n    í‚¤ì›Œë“œ: analysisData.í‚¤ì›Œë“œ,\n    ë‹µì¥í•„ìš”: analysisData.ë‹µì¥í•„ìš”,\n    ì¡°ì¹˜ì‚¬í•­: analysisData.ì¡°ì¹˜ì‚¬í•­,\n    ìš”ì•½: analysisData.ìš”ì•½,\n    ìœ„í—˜ë„: analysisData.ìœ„í—˜ë„\n  },\n  \n  // === ë‹µì¥ ì „ëµ ===\n  strategy: {\n    template: responseTemplate,\n    tone: tone, // í´ë°± ë¡œì§ì—ì„œ ë³´ì •ëœ í†¤\n    templateId: templateId, // Airtable ê²€ìƒ‰ìš© template_id\n    responseType: responseType,\n    priority: priorityLevel,\n    deadline: responseDeadline,\n    shouldRespond: analysisData.ë‹µì¥í•„ìš”,\n    autoResponseEligible: autoResponseEligible,\n    securityAction: securityAction,\n    escalationRequired: escalationRequired,\n    estimatedResponseTime: estimatedResponseTime\n  },\n  \n  // === ë¼ìš°íŒ… ì •ë³´ ===\n  routing: {\n    department: assignedDepartment,\n    team: assignedTeam,\n    urgencyLevel: analysisData.ê¸´ê¸‰ë„,\n    assignee: assignedTeam,\n    workflowPath: analysisData.ë‹µì¥í•„ìš” ? 'response_required' : 'notification_only',\n    nextAction: escalationRequired ? 'escalate' : 'normal_processing'\n  },\n  \n  // === ë©”íƒ€ë°ì´í„° ===\n  metadata: {\n    processedAt: new Date().toISOString(),\n    workflowVersion: '1.0',\n    confidence: analysisData.ìš°ì„ ìˆœìœ„ === 'ê¸´ê¸‰' ? 'high' : 'medium',\n    source: 'email_automation_system',\n    needsHumanReview: escalationRequired || analysisData.ìœ„í—˜ë„ === 'ë†’ìŒ',\n    fallbackApplied: tone !== responseTemplate ? true : false, // í´ë°± ì ìš© ì—¬ë¶€\n    finalCombination: `${analysisData.ì¹´í…Œê³ ë¦¬}_${tone}`, // ìµœì¢… ì‚¬ìš©ëœ ì¡°í•©\n    templateId: templateId // ìƒì„±ëœ template_id\n  }\n};"
      },
      "id": "a97cf96f-e98a-4657-9335-92452beceea9",
      "name": "Merge & Strategy",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1520,
        -80
      ],
      "notesInFlow": true,
      "notes": "ğŸŸ¡ 4ê°•: ë°ì´í„° í†µí•© & ì „ëµ ê²°ì •\nì¶œë ¥:\n- email{} (ì›ë³¸ ì •ë³´)\n- analysis{} (AI ë¶„ì„)\n- strategy{} (ë‹µì¥ ì „ëµ)"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "11111111-1111-1111-1111-111111111111",
              "leftValue": "={{ $json.strategy.shouldRespond }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "2ab0f475-5f7a-4059-9124-05e0b0563fdd",
      "name": "Check Reply Needed",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1760,
        -120
      ]
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appKMtup6arBHs53y",
          "mode": "list",
          "cachedResultName": "ì´ë©”ì¼ ìë™ ë‹µì¥",
          "cachedResultUrl": "https://airtable.com/appKMtup6arBHs53y"
        },
        "table": {
          "__rl": true,
          "value": "tblXDvZyuyMPNPvGK",
          "mode": "list",
          "cachedResultName": "ì´ë©”ì¼_í…œí”Œë¦¿",
          "cachedResultUrl": "https://airtable.com/appKMtup6arBHs53y/tblXDvZyuyMPNPvGK"
        },
        "filterByFormula": "={{ `template_id = '${$json.strategy.templateId}'` }}",
        "options": {}
      },
      "id": "389945a8-3f4e-44e9-91df-12802196427e",
      "name": "Get Template from Airtable",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [
        1980,
        -180
      ],
      "notesInFlow": true,
      "credentials": {
        "airtableTokenApi": {
          "id": "HdXEjLwjcS4kqWIB",
          "name": "Airtable Personal Access Token account 3"
        }
      },
      "notes": "ğŸŸ¢ Airtableì—ì„œ í…œí”Œë¦¿ ê°€ì ¸ì˜¤ê¸°\nì…ë ¥: category, tone\nì¶œë ¥: template_body\n\n\n```\në„ˆëŠ” ë‹¤ì–‘í•œ ì´ë©”ì¼ ë‹µì¥ ìƒí™©ì— ë§ëŠ” í…œí”Œë¦¿ì„ ì‘ì„±í•˜ëŠ” í…œí”Œë¦¿ ë§ˆìŠ¤í„°ì•¼.\n\nì•„ë˜ì— ì£¼ì–´ì§„ ì¹´í…Œê³ ë¦¬ + í†¤ ì¡°í•© ë¦¬ìŠ¤íŠ¸ì— ëŒ€í•´, ê° ì¡°í•©ë³„ë¡œ ì´ë©”ì¼ ë‹µì¥ í…œí”Œë¦¿ì„ ìƒì„±í•˜ê³  **Airtable í‘œì— ë¶™ì—¬ë„£ì„ ìˆ˜ ìˆëŠ” í˜•ì‹**ìœ¼ë¡œ ì¶œë ¥í•´ì¤˜.\n\n---\n\nğŸ“Œ ì¶œë ¥ í˜•ì‹:\n\nê° í–‰ì€ í…œí”Œë¦¿ í•˜ë‚˜ë¥¼ ì˜ë¯¸í•˜ê³ , ì—´ì€ íƒ­(tab, `\\t`)ìœ¼ë¡œ êµ¬ë¶„í•œë‹¤.  \nì•„ë˜ ìˆœì„œë¡œ ì—´ì„ êµ¬ì„±í•œë‹¤:\n\n```\ntemplate_id\tì´ë¦„\tì¹´í…Œê³ ë¦¬\tí†¤\tí…œí”Œë¦¿\tì„¤ëª…\tì–¸ì–´\n```\n\nì˜ˆ:\n```\në³´ì•ˆ_ì •ë³´ì œê³µí˜•_kr\të³´ì•ˆ ì•Œë¦¼ ì‘ë‹µ (ì •ë³´ì œê³µí˜•)\të³´ì•ˆ\tì •ë³´ì œê³µí˜•\tì•ˆë…•í•˜ì„¸ìš”.\\në³´ì•ˆ ì•Œë¦¼ì„ í™•ì¸í•´ë“œë ¸ìŠµë‹ˆë‹¤. ê·€í•˜ì˜ ê³„ì •ì— ë³´ì•ˆ ê´€ë ¨ ë³€ë™ ì‚¬í•­ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.\\nê³„ì • ë³´ì•ˆì„ ìœ„í•´ ì¦‰ì‹œ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\\nê°ì‚¬í•©ë‹ˆë‹¤.\\në³´ì•ˆíŒ€ ë“œë¦¼.\të³´ì•ˆ ì •ë³´ì œê³µí˜• ì‘ë‹µ\tí•œêµ­ì–´\n```\n\n---\n\nğŸ“Œ í…œí”Œë¦¿ ì‘ì„± ê¸°ì¤€:\n\n- ì¤„ë°”ê¿ˆì€ `\\n`ìœ¼ë¡œ í‘œí˜„\n- ì „ì²´ í…ìŠ¤íŠ¸ëŠ” ì¡´ëŒ“ë§ ìŠ¤íƒ€ì¼\n- í…œí”Œë¦¿ ê¸¸ì´ëŠ” 3~6ì¤„\n- ë¬¸ë§¥ì€ ì´ë©”ì¼ ë‹µì¥ í˜•ì‹\n- 'í…œí”Œë¦¿' ì—´ì€ ì´ë©”ì¼ ë³¸ë¬¸ ê·¸ëŒ€ë¡œ ì‘ì„± (ì˜ˆ: ì¸ì‚¬ë§ â†’ ìƒí™© ì„¤ëª… â†’ ë§ˆë¬´ë¦¬ ì¸ì‚¬)\n- ë¸Œëœë“œë‚˜ íŠ¹ì • ì„œë¹„ìŠ¤ëª…ì€ í¬í•¨í•˜ì§€ ì•ŠìŒ\n\n---\n\nğŸ“Œ ìš”ì²­í•  ì¡°í•© ë¦¬ìŠ¤íŠ¸:\n\n- ì¹´í…Œê³ ë¦¬: ë³´ì•ˆ\n- í†¤: ì •ë³´ì œê³µí˜•, ê³µê°í˜•, ì—´ì •ì , ì „ë¬¸ê°€í˜•, ìºì£¼ì–¼ \n\nì´ 5ê°€ì§€ ì¡°í•©ì— ëŒ€í•´ ê° í–‰ì„ ìƒì„±í•´ì„œ í‘œë¡œ ë³´ì—¬ì¤˜.\n\n**ë°˜ë“œì‹œ íƒ­(\\t)ìœ¼ë¡œ êµ¬ë¶„ëœ í‘œ í˜•ì‹ë§Œ ì¶œë ¥**í•˜ê³ , JSONì´ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆ.\n```\n"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "= ì´ë©”ì¼ ë‹µì¥ ì‘ì„± ìš”ì²­ ==\n\në‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°œì¸í™”ëœ ë‹µì¥ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n**== ì›ë³¸ ì´ë©”ì¼ ì •ë³´ ==**\n- ë°œì‹ ì: {{ $('Check Reply Needed').item.json.email.senderName }} ({{ $('Check Reply Needed').item.json.email.senderEmail }})\n- ìˆ˜ì‹ ì: {{ $('Check Reply Needed').item.json.email.recipientEmail }}\n- ì œëª©: {{ $('Check Reply Needed').item.json.email.subject }}\n- ì •ì œëœ ì œëª©: {{ $('Check Reply Needed').item.json.email.subjectClean }}\n- ë‚ ì§œ: {{ $('Check Reply Needed').item.json.email.date }}\n- ì´ë©”ì¼ ìœ í˜•: {{ $('Check Reply Needed').item.json.email.emailType }}\n\n**== ì›ë³¸ ì´ë©”ì¼ ë‚´ìš© ==**\n{{ $('Check Reply Needed').item.json.email.content }}\n\n**== ì´ë©”ì¼ ìš”ì•½ ==**\n{{ $('Check Reply Needed').item.json.email.contentSummary }}\n\n**== í¬í•¨ëœ URL ==**\n{{ $('Check Reply Needed').item.json.email.urls }}\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n**== AI ë¶„ì„ ê²°ê³¼ ==**\n- ì˜ë„: {{ $('Check Reply Needed').item.json.analysis.ì˜ë„ }}\n- ê°ì •: {{ $('Check Reply Needed').item.json.analysis.ê°ì • }}\n- ì¹´í…Œê³ ë¦¬: {{ $('Check Reply Needed').item.json.analysis.ì¹´í…Œê³ ë¦¬ }}\n- ê¸´ê¸‰ë„: {{ $('Check Reply Needed').item.json.analysis.ê¸´ê¸‰ë„ }}\n- ìš°ì„ ìˆœìœ„: {{ $('Check Reply Needed').item.json.analysis.ìš°ì„ ìˆœìœ„ }}\n- ìœ„í—˜ë„: {{ $('Check Reply Needed').item.json.analysis.ìœ„í—˜ë„ }}\n- ìš”ì•½: {{ $('Check Reply Needed').item.json.analysis.ìš”ì•½ }}\n- í•„ìš” ì¡°ì¹˜ì‚¬í•­: {{ $('Check Reply Needed').item.json.analysis.ì¡°ì¹˜ì‚¬í•­ }}\n- í‚¤ì›Œë“œ: {{ $('Check Reply Needed').item.json.analysis.í‚¤ì›Œë“œ }}\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n**== ì‚¬ìš©í•  í…œí”Œë¦¿ ==**\n{{ $json['í…œí”Œë¦¿'] }}\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n**== ë‹µì¥ ì „ëµ ì •ë³´ ==**\n- ì‘ë‹µ í†¤: {{ $('Check Reply Needed').item.json.strategy.tone }}\n- ì‘ë‹µ ìœ í˜•: {{ $('Check Reply Needed').item.json.strategy.responseType }}\n- ìš°ì„ ìˆœìœ„: {{ $('Check Reply Needed').item.json.strategy.priority }}\n- ì˜ˆìƒ ì‘ë‹µ ì‹œê°„: {{ $('Check Reply Needed').item.json.strategy.estimatedResponseTime }}\n- ë‹´ë‹¹ ë¶€ì„œ: {{ $('Check Reply Needed').item.json.routing.department }}\n\n================================================================\n**== ì‘ì„± ê°€ì´ë“œë¼ì¸ ==**\n\n1. **ì œëª©(Subject)**  \n   - ì›ë³¸ ì œëª© ì•ì— â€œRe: â€ ì¶”ê°€ í›„ í•„ìš” ì‹œ ëª…í™•Â·êµ¬ì²´í™”  \n   - ì˜ˆ) â€œRe: ë³´ì•ˆ ì•Œë¦¼â€ â†’ â€œRe: ë³´ì•ˆ ì•Œë¦¼ â€“ ê³„ì • ì•¡ì„¸ìŠ¤ í™•ì¸ ì™„ë£Œâ€\n\n2. **ì¸ì‚¬ë§**  \n   - ë°œì‹ ìëª…ì„ ì‚¬ìš©í•˜ì—¬ ì •ì¤‘íˆ ì‹œì‘ (ì˜ˆ: â€œì•ˆë…•í•˜ì„¸ìš”, [ë°œì‹ ìëª…]ë‹˜.â€)\n\n3. **ë³¸ë¬¸ ì‘ì„± ì›ì¹™**  \n   - ìœ„ â€œì‚¬ìš©í•  í…œí”Œë¦¿â€ì„ **ë¼ˆëŒ€**ë¡œ ì‚¼ê³ , ì›ë³¸ ë©”ì¼ í•µì‹¬Â·AI ì¡°ì¹˜ì‚¬í•­Â·ì¹´í…Œê³ ë¦¬ íŠ¹ì„±ì„ ë°˜ì˜í•´ ìƒí™© ë§ì¶¤ ìˆ˜ì •  \n   - í†¤({{ $('Check Reply Needed').item.json.strategy.tone }})ì„ ì¼ê´€ ìœ ì§€\n\n4. **êµ¬ì²´ì  ë‚´ìš© í¬í•¨**  \n   - ì›ë³¸ ì´ë©”ì¼ì—ì„œ ì–¸ê¸‰ëœ ì œí’ˆÂ·ì„œë¹„ìŠ¤Â·ë¬¸ì œÂ·ë‚ ì§œÂ·URL ë“±ì„ ëª…í™•íˆ ì–¸ê¸‰\n\n5. **ì¡°ì¹˜ì‚¬í•­ ë° ë‹¤ìŒ ë‹¨ê³„**  \n   - AI ì¡°ì¹˜ì‚¬í•­ì„ **ì‹¤í–‰ ê°€ëŠ¥** ë‹¨ê³„ë¡œ ì œì‹œ  \n   - ê¸´ê¸‰ë„({{ $('Check Reply Needed').item.json.analysis.ê¸´ê¸‰ë„ }})ì— ë§ì¶° ì‘ë‹µ ê¸°í•œ ì•ˆë‚´\n\n6. **ë§ˆë¬´ë¦¬**  \n   - ì¶”ê°€ ë¬¸ì˜Â·í›„ì† ì§€ì› ì•ˆë‚´ + ì •ì¤‘í•œ ì¸ì‚¬  \n   - ì„œëª…ì— ë‹´ë‹¹ ë¶€ì„œëª…({{ $('Check Reply Needed').item.json.routing.department }}) í¬í•¨\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n**ì¹´í…Œê³ ë¦¬ë³„ íŠ¹í™” ìš”ì†Œ(í•„ìš” ì‹œ í¬í•¨)**  \n- **ë³´ì•ˆ**: ë³´ì•ˆ ì¡°ì¹˜ ì¤‘ìš”ì„± ê°•ì¡°, ë‹¨ê³„ë³„ ì•ˆë‚´  \n- **ê³ ê°ì§€ì›**: ì‚¬ê³¼Â·í•´ê²° ì˜ì§€, ë§Œì¡± ë³´ì¥  \n- **ì˜ì—…**: ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜Â·ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ  \n- **ê¸°ìˆ ì§€ì›**: ë‹¨ê³„ë³„ ê¸°ìˆ  í•´ê²°, ì •í™•ì„±  \n- **ë§ˆì¼€íŒ…**: í˜œíƒ ê°•ì¡°, í–‰ë™ ìœ ë„  \n- **ë‚´ë¶€ì—…ë¬´**: í˜‘ì—…Â·íš¨ìœ¨ ê°•ì¡°  \n- **ì¼ë°˜ë¬¸ì˜**: ëª…í™• ì •ë³´ ì œê³µ, ì¶”ê°€ ë„ì›€ ì œì•ˆ\n\n**ê°ì • ìƒíƒœë³„ ëŒ€ì‘**  \n- ê¸ì •ì  â†’ ê°ì‚¬Â·ê´€ê³„ ê°•í™”  \n- ì¤‘ë¦½ì  â†’ ì‚¬ì‹¤ ìœ„ì£¼Â·ì „ë¬¸ì„±  \n- ë¶€ì •ì  â†’ ê³µê°Â·ì‚¬ê³¼Â·í•´ê²°ì±… ìš°ì„ \n\n**ê¸´ê¸‰ë„ë³„ ëŒ€ì‘**  \n- ë†’ìŒ â†’ ì¦‰ì‹œ ì¡°ì¹˜Â·ë¹ ë¥¸ í•´ê²° ì•½ì†  \n- ë³´í†µ â†’ ì²´ê³„ì  ì ‘ê·¼Â·ì²˜ë¦¬ ì‹œê°„ ì•ˆë‚´  \n- ë‚®ìŒ â†’ ì¶©ë¶„í•œ ì •ë³´ ì œê³µÂ·ì—¬ìœ  ìˆëŠ” ëŒ€ì‘\n\n================================================================\n**== ì¶œë ¥ í˜•ì‹ ==**\nSubject: [ë‹µì¥ ì œëª©]\n[ë‹µì¥ ë³¸ë¬¸ â€“ ì¤„ë°”ê¿ˆ ìœ ì§€]\n[ì„œëª…]\n\n================================================================\n**== ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì‘ì„± ì™„ë£Œ ì „ ìŠ¤ìŠ¤ë¡œ í™•ì¸)**  \n1. í…œí”Œë¦¿ í•µì‹¬ ë©”ì‹œì§€Â·í†¤ì´ ìœ ì§€ë˜ì—ˆëŠ”ê°€?  \n2. ì›ë³¸ ì´ë©”ì¼ì˜ êµ¬ì²´ ë‚´ìš©ì— ì •í™•íˆ ì‘ë‹µí–ˆëŠ”ê°€?  \n3. AI ë¶„ì„ ì¡°ì¹˜ì‚¬í•­Â·ê¸´ê¸‰ë„ê°€ ë°˜ì˜ë˜ì—ˆëŠ”ê°€?  \n4. í•œêµ­ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸í™”ì— ë§ëŠ” ì •ì¤‘í•œ ì–¸ì–´ë¥¼ ì‚¬ìš©í–ˆëŠ”ê°€?  \n5. ë‹¤ìŒ ë‹¨ê³„Â·í›„ì† ì¡°ì¹˜ê°€ ëª…í™•íˆ ì•ˆë‚´ë˜ì—ˆëŠ”ê°€?  \n\n**ì¤‘ìš”:** ì´ëŠ” ë‹¨ìˆœ í…œí”Œë¦¿ ë³µë¶™ì´ ì•„ë‹Œ, *ì´ íŠ¹ì • ì´ë©”ì¼*ì„ ìœ„í•œ 1:1 ë§ì¶¤í˜• ë‹µë³€ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ëª¨ë“  ì •ë³´ë¥¼ ì¢…í•©í•´ ìì—°ìŠ¤ëŸ½ê³  ì „ë¬¸ì ì¸ ë‹µì¥ì„ ì‘ì„±í•˜ì„¸ìš”.\n",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ì „ë¬¸ì ì¸ ì´ë©”ì¼ ë‹µì¥ ì‘ì„± AI ë¹„ì„œì…ë‹ˆë‹¤. ì œê³µëœ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ ê°œì¸í™”ë˜ê³  ìƒí™©ì— ë§ëŠ” ë‹µì¥ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. \n\në‹¤ìŒ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ì„¸ìš”:\n1. ì œê³µëœ í…œí”Œë¦¿ì˜ í†¤ê³¼ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë˜, ë°›ì€ ì´ë©”ì¼ì˜ êµ¬ì²´ì  ë‚´ìš©ì— ë§ì¶° ê°œì¸í™”í•˜ì„¸ìš”\n2. ë°œì‹ ìì˜ ì´ë¦„ì„ ì ì ˆíˆ ì‚¬ìš©í•˜ì—¬ ê°œì¸ì ì¸ ëŠë‚Œì„ ì£¼ì„¸ìš”\n3. ì›ë³¸ ì´ë©”ì¼ì˜ í•µì‹¬ í¬ì¸íŠ¸ì— ëŒ€í•´ êµ¬ì²´ì ìœ¼ë¡œ ì‘ë‹µí•˜ì„¸ìš”\n4. ì „ë¬¸ì ì´ê³  ì •ì¤‘í•œ í†¤ì„ ìœ ì§€í•˜ì„¸ìš”\n5. í•„ìš”í•œ ê²½ìš° í›„ì† ì¡°ì¹˜ë‚˜ ì—°ë½ì²˜ ì •ë³´ë¥¼ í¬í•¨í•˜ì„¸ìš”\n6. ë‹µì¥ì€ ê°„ê²°í•˜ë˜ í•„ìš”í•œ ì •ë³´ëŠ” ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”\n7. í•œêµ­ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸í™”ì— ë§ëŠ” ì •ì¤‘í•˜ê³  ì˜ˆì˜ ë°”ë¥¸ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”\n8. í…œí”Œë¦¿ì˜ í•µì‹¬ ë©”ì‹œì§€ëŠ” ìœ ì§€í•˜ë©´ì„œë„ ìì—°ìŠ¤ëŸ½ê³  ê°œì¸í™”ëœ ë‹µì¥ì„ ì‘ì„±í•˜ì„¸ìš”\n"
        }
      },
      "id": "cbc9c979-fa4d-4f3d-8a47-122820f8d223",
      "name": "AI Reply Writer",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        2160,
        -180
      ],
      "notesInFlow": true,
      "notes": "ğŸ”´ AI ë‹µì¥ ì‘ì„±\nì…ë ¥:\n- ì›ë³¸ ì´ë©”ì¼ ì •ë³´\n- ë¶„ì„ ê²°ê³¼\n- í…œí”Œë¦¿\n- í†¤ ê°€ì´ë“œ\nì¶œë ¥: ì™„ì„±ëœ ë‹µì¥"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.3
        }
      },
      "id": "c21d109b-89aa-41ed-b636-aaa4dc5fbdba",
      "name": "OpenAI Chat Model 2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        2160,
        20
      ],
      "credentials": {
        "openAiApi": {
          "id": "i2ko7n62147IgBPO",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {
        "resource": "draft",
        "subject": "={{ $json.output.subject }}",
        "message": "={{ $json.output.body }}",
        "options": {}
      },
      "id": "29d7f7f5-3648-482f-9b0a-cd5c25a3dcee",
      "name": "Create Gmail Draft",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        2480,
        -180
      ],
      "notesInFlow": true,
      "webhookId": "f85e7035-1dbe-45a7-bff6-52d0983e9d48",
      "credentials": {
        "gmailOAuth2": {
          "id": "FpAOSM1d6pRwc8pe",
          "name": "Gmail account"
        }
      },
      "notes": "ğŸŸ¢ Gmail ì´ˆì•ˆ ìƒì„±\nê°™ì€ ìŠ¤ë ˆë“œì— ë‹µì¥"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "22222222-2222-2222-2222-222222222222",
              "leftValue": "={{ $('Merge & Strategy').item.json.strategy.priority }}",
              "rightValue": "ë†’ìŒ",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "c26376ca-f0b5-48d2-8377-434cc81feebc",
              "leftValue": "={{ $('Merge & Strategy').item.json.strategy.priority }}",
              "rightValue": "ê¸´ê¸‰",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "b92c9534-6a06-48fe-8d7f-050041fc91fd",
      "name": "Check Urgency",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1740,
        200
      ]
    },
    {
      "parameters": {
        "operation": "markAsRead",
        "messageId": "={{ $('Gmail Trigger').item.json.id }}"
      },
      "id": "5c68a130-5bc0-4b77-aa4c-d2e304656652",
      "name": "Mark as Read",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        4140,
        40
      ],
      "notesInFlow": true,
      "webhookId": "3b833772-73a6-400d-b92e-cd18782753ce",
      "credentials": {
        "gmailOAuth2": {
          "id": "FpAOSM1d6pRwc8pe",
          "name": "Gmail account"
        }
      },
      "notes": "ğŸŸ¢ ì²˜ë¦¬ ì™„ë£Œ í‘œì‹œ"
    },
    {
      "parameters": {
        "content": "## ğŸ¯ AI Agent êµ¬ì„± ì„¤ëª…\n\n**1. AI Email Analyzer**\n- Chat Model: OpenAI GPT-4 (ì˜¨ë„ 0.3)\n- Output Parser: JSON êµ¬ì¡°í™” íŒŒì„œ\n- ëª…í™•í•œ í”„ë¡¬í”„íŠ¸ë¡œ 7ê°œ í•„ë“œ ìƒì„±\n\n**2. AI Reply Writer**\n- Chat Model: OpenAI GPT-4 (ì˜¨ë„ 0.7)\n- ì´ì „ ë…¸ë“œë“¤ì˜ ë°ì´í„° ì°¸ì¡°\n- í†¤ë³„ ê°€ì´ë“œë¼ì¸ ì œê³µ",
        "height": 280,
        "width": 320,
        "color": 3
      },
      "id": "da38a3c2-eff7-4b3b-8e83-a37deb87e66c",
      "name": "Sticky Note - AI Config",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1200,
        400
      ]
    },
    {
      "parameters": {
        "content": "## ğŸ“Š Airtable í…Œì´ë¸” êµ¬ì¡°\n\n**1. ì´ë©”ì¼_ë¡œê·¸**\n- ì²˜ë¦¬ì¼ì‹œ, ë©”ì‹œì§€ID, ë°œì‹ ì\n- ì˜ë„, ê¸´ê¸‰ë„, ê°ì •, ì¹´í…Œê³ ë¦¬\n- ì²˜ë¦¬ìƒíƒœ, ì‚¬ìš©í…œí”Œë¦¿\n\n**2. ì´ë©”ì¼_í…œí”Œë¦¿**\n- category, tone\n- template_body, variables\n\n**3. ê³ ê°_ì •ë³´**\n- ì´ë©”ì¼, ì´ë¦„, íšŒì‚¬\n- ì´ì „ë¬¸ì˜ë‚´ì—­",
        "height": 340,
        "width": 350,
        "color": 5
      },
      "id": "a4bb4045-f32b-4073-bd46-e36739343406",
      "name": "Sticky Note - Airtable",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3400,
        260
      ]
    },
    {
      "parameters": {
        "content": "## ğŸ”„ ì „ì²´ ì›Œí¬í”Œë¡œìš° íë¦„\n\n1. Gmail Trigger â†’ ìƒˆ ë©”ì¼ ê°ì§€ (idë§Œ)\n2. Get Email Details â†’ ì „ì²´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n3. Parse Email Data â†’ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ë³€í™˜\n4. AI Email Analyzer â†’ 7ê°œ í•„ë“œ ë¶„ì„\n5. Merge & Strategy â†’ ë°ì´í„° í†µí•© & ì „ëµ\n6. ë¶„ê¸° ì²˜ë¦¬:\n   - ë‹µì¥ í•„ìš” â†’ Template â†’ AI Reply\n   - ê¸´ê¸‰ â†’ Slack ì•Œë¦¼\n   - ë¶€ì •ì  â†’ ê´€ë¦¬ì ìŠ¹ì¸\n7. Airtable ë¡œê·¸ â†’ ëª¨ë“  ë‚´ì—­ ì €ì¥\n8. Mark as Read â†’ ì²˜ë¦¬ ì™„ë£Œ\n\n",
        "height": 340,
        "width": 450,
        "color": 7
      },
      "id": "8e3c1b47-0dcd-4fb5-be47-886641ca1a8e",
      "name": "Sticky Note - Flow",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        540,
        220
      ]
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "filters": {}
      },
      "type": "n8n-nodes-base.gmailTrigger",
      "typeVersion": 1.2,
      "position": [
        420,
        -80
      ],
      "id": "7eec2b28-b666-49af-8434-dae1d482a698",
      "name": "Gmail Trigger",
      "credentials": {
        "gmailOAuth2": {
          "id": "FpAOSM1d6pRwc8pe",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"subject\": {\n      \"type\": \"string\"\n    },\n    \"body\": {\n      \"type\": \"string\"\n    }\n  },\n  \"required\": [\"subject\", \"body\"]\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        2340,
        20
      ],
      "id": "e6fab67b-1fb8-453e-84a6-bb1e26d4b9f9",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C092VKCHTL5",
          "mode": "list",
          "cachedResultName": "ì´ë©”ì¼-ìë™í™”"
        },
        "text": "={{ $json.output }}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        3100,
        -180
      ],
      "id": "d94fda2a-91a5-455b-86c3-fac5b73b0208",
      "name": "Slack",
      "webhookId": "24589370-28fb-4f4d-bb13-33ff64d02a59",
      "credentials": {
        "slackOAuth2Api": {
          "id": "sm4OLhx5v8NKi3qD",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=== ìƒˆ ë‹µì¥ ì´ˆì•ˆ Slack ì•Œë¦¼ ìƒì„± ==\n\n[ì´ë©”ì¼ ìš”ì•½]\nâ€¢ ì œëª©: {{ $('Merge & Strategy').item.json.email.subjectClean }}\nâ€¢ ë°œì‹ ì: {{ $('Merge & Strategy').item.json.email.senderName }} ({{ $('Merge & Strategy').item.json.email.senderEmail }})\nâ€¢ ì¹´í…Œê³ ë¦¬: {{ $('Merge & Strategy').item.json.analysis.ì¹´í…Œê³ ë¦¬ }}\nâ€¢ ìš°ì„ ìˆœìœ„: {{ $('Merge & Strategy').item.json.strategy.priority }}\nâ€¢ ì˜ˆìƒ ì‘ë‹µ ê¸°í•œ: {{ $('Merge & Strategy').item.json.strategy.estimatedResponseTime }}\nâ€¢ AI ìš”ì•½: {{ $('Merge & Strategy').item.json.analysis.ìš”ì•½ }}\n\n[ë‹µì¥ ì´ˆì•ˆ ë¯¸ë¦¬ë³´ê¸°]\n{{ $('AI Reply Writer').item.json.output.body }}\n\n[ì´ˆì•ˆ Gmail ë§í¬]\nhttps://mail.google.com/mail/u/0/#inbox?compose={{ $('Create Gmail Draft').item.json.message.id }}\n\nìœ„ ì •ë³´ë¥¼ í™œìš©í•´ íŒ€ ì±„ë„(ì´ë©”ì¼-ìë™í™”)ì— ê³µìœ í•  Slack ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ì„¸ìš”.\n",
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ê¸°ì—… ë‚´ë¶€ìš© Slack ì•Œë¦¼ ì „ë¬¸ AI ë¹„ì„œì…ë‹ˆë‹¤.\në‹¤ìŒ ê·œì¹™ì„ ë°˜ë“œì‹œ ì§€ì¼œ í•œêµ­ì–´ Slack ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ì‹­ì‹œì˜¤.\n\n1) ì¶œë ¥ì€ ìˆœìˆ˜ í…ìŠ¤íŠ¸. êµµê²Œ(**)Â·ê¸°ìš¸ì„(*)Â·ì½”ë“œë¸”ë¡(```) ë“± ë§ˆí¬ë‹¤ìš´ì€ ì‚¬ìš© ê¸ˆì§€.\n2) ìµœëŒ€ 8ì¤„. ê° ì¤„ì€ \\n ë¡œ, í•„ìš”í•˜ë©´ êµ¬ë¶„ìš© ë¹ˆ ì¤„ì€ \\n\\n ë¡œ ì‚½ì…í•´ ê¹”ë”í•œ ë ˆì´ì•„ì›ƒì„ ìœ ì§€í•©ë‹ˆë‹¤.\n3) ì²« ì¤„: :email: ì´ëª¨ì§€ + í•µì‹¬ ìš”ì•½ í•œ ë¬¸ì¥.\n4) ì´ì–´ì§€ëŠ” ë¸”ë¡ ìˆœì„œ\n   a) ìš”ì•½(í•œ ì¤„)  \n   b) ë©”íƒ€ë°ì´í„°(ì¹´í…Œê³ ë¦¬Â·ìš°ì„ ìˆœìœ„Â·ì˜ˆìƒ ì‘ë‹µ ê¸°í•œ)  \n   c) Gmail ì´ˆì•ˆ ë§í¬  \n   d) í–‰ë™ ì§€ì‹œ\n5) ì‘ì„± í†¤ì€ â€˜{{ $('Merge & Strategy').item.json.strategy.tone }}â€™ ê°’ì„ ê·¸ëŒ€ë¡œ ë”°ë¦…ë‹ˆë‹¤.\n6) ë§í¬Â·ID ê°’ì€ ê·¸ëŒ€ë¡œ ì‚½ì…í•˜ë©°, JSONÂ·ì£¼ì„Â·ë§ˆí¬ë‹¤ìš´ í‘œ ë“±ì€ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        2700,
        -180
      ],
      "id": "bf04bbdf-4b3d-4afe-befd-13e87bcb739c",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2680,
        40
      ],
      "id": "915fdcd5-dc2f-46d3-b471-99e8c97c2f5c",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "i2ko7n62147IgBPO",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "== ê¸´ê¸‰ ì´ë©”ì¼ Slack ì•Œë¦¼ ì‘ì„± ==\n\n[ì´ë©”ì¼ ë©”íƒ€ë°ì´í„°]\nâ€¢ ë°œì‹ ì: {{ $('Merge & Strategy').item.json.email.senderName }} ({{ $('Merge & Strategy').item.json.email.senderEmail }})\nâ€¢ ì œëª©: {{ $('Merge & Strategy').item.json.email.subject }}\nâ€¢ ì¹´í…Œê³ ë¦¬: {{ $('Merge & Strategy').item.json.analysis.ì¹´í…Œê³ ë¦¬ }}\nâ€¢ ê¸´ê¸‰ë„: {{ $('Merge & Strategy').item.json.analysis.ê¸´ê¸‰ë„ }}\nâ€¢ ìœ„í—˜ë„: {{ $('Merge & Strategy').item.json.analysis.ìœ„í—˜ë„ }}\nâ€¢ AI ìš”ì•½: {{ $('Merge & Strategy').item.json.analysis.ìš”ì•½ }}\nâ€¢ Gmail ë§í¬: https://mail.google.com/mail/u/0/#inbox/{{ $('Merge & Strategy').item.json.email.messageId }}\n\nìœ„ ì •ë³´ë¥¼ í™œìš©í•´ ì¦‰ê° ëŒ€ì‘ì´ í•„ìš”í•œ Slack ê²½ë³´ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ì„¸ìš”.\n",
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ê¸´ê¸‰ ì´ë©”ì¼ ì•Œë¦¼ ì „ìš© Slack ë´‡ì…ë‹ˆë‹¤.\në‹¤ìŒ ì§€ì¹¨ì„ ì—„ê²©íˆ ì§€í‚¤ì‹­ì‹œì˜¤.\n\n1) ì¶œë ¥ì€ ìˆœìˆ˜ í…ìŠ¤íŠ¸. ë§ˆí¬ë‹¤ìš´ ê¸ˆì§€.\n2) ì²« ì¤„: ğŸš¨ ì´ëª¨ì§€ + ì œëª©Â·ë°œì‹ ìÂ·ì¹´í…Œê³ ë¦¬Â·ê¸´ê¸‰ë„ ìš”ì•½.\n3) ë‘˜ì§¸ ì¤„: @here ë©˜ì…˜ê³¼ ì¦‰ì‹œ ëŒ€ì‘ ì§€ì‹œ.\n4) í•„ìš” ì‹œ ì‹œê°ì  ê²½ê°ì‹¬ì„ ìœ„í•´ ğŸ”¥ ì´ëª¨ì§€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\n5) ìµœëŒ€ 5ì¤„. ì˜ë¯¸ ë‹¨ë½ ì‚¬ì´ì—ëŠ” \\n\\n ë¡œ ë¹ˆ ì¤„ì„ ë„£ì–´ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n6) JSONÂ·ì£¼ì„Â·í‘œ ë“± ì¶”ê°€ ìš”ì†ŒëŠ” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        1980,
        200
      ],
      "id": "7c1c879c-7dc6-4e70-8c4b-1367a226724e",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1980,
        420
      ],
      "id": "193b4cd0-03a0-4010-ae3a-e9d9c78fdc9a",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "i2ko7n62147IgBPO",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "appqH342szMpU65kM",
          "mode": "list",
          "cachedResultName": "ì´ë©”ì¼ ìë™í™” ë¡œê·¸",
          "cachedResultUrl": "https://airtable.com/appqH342szMpU65kM"
        },
        "table": {
          "__rl": true,
          "value": "tbl3zNduozSiZGKrJ",
          "mode": "list",
          "cachedResultName": "Table 1",
          "cachedResultUrl": "https://airtable.com/appqH342szMpU65kM/tbl3zNduozSiZGKrJ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "ì´ë©”ì¼ ì œëª©": "={{ $('Merge & Strategy').item.json.email.subjectClean }}",
            "ì´ë©”ì¼ ì£¼ì†Œ": "={{ $('Merge & Strategy').item.json.email.senderEmail }}",
            "ì´ë©”ì¼ ë‚´ìš© ìš”ì•½": "={{ $('Merge & Strategy').item.json.email.contentSummary }}",
            "ìš”ì•½": "={{ $('Merge & Strategy').item.json.analysis[\"ìš”ì•½\"] }}",
            "ë‹µì¥í•„ìš”": "={{ $('Merge & Strategy').item.json.analysis[\"ë‹µì¥í•„ìš”\"] }}",
            "ì˜ë„": "={{ $('Merge & Strategy').item.json.analysis[\"ì˜ë„\"] }}",
            "ê¸´ê¸‰ë„": "={{ $('Merge & Strategy').item.json.analysis[\"ê¸´ê¸‰ë„\"] }}",
            "ê°ì •": "={{ $('Merge & Strategy').item.json.analysis[\"ê°ì •\"] }}",
            "ìš°ì„ ìˆœìœ„": "={{ $('Merge & Strategy').item.json.analysis[\"ìš°ì„ ìˆœìœ„\"] }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "ì´ë©”ì¼ ì œëª©",
              "displayName": "ì´ë©”ì¼ ì œëª©",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ì´ë©”ì¼ ì£¼ì†Œ",
              "displayName": "ì´ë©”ì¼ ì£¼ì†Œ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ì´ë©”ì¼ ë‚´ìš© ìš”ì•½",
              "displayName": "ì´ë©”ì¼ ë‚´ìš© ìš”ì•½",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ìš”ì•½",
              "displayName": "ìš”ì•½",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ìš°ì„ ìˆœìœ„",
              "displayName": "ìš°ì„ ìˆœìœ„",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ë‹µì¥í•„ìš”",
              "displayName": "ë‹µì¥í•„ìš”",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ì˜ë„",
              "displayName": "ì˜ë„",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ê¸´ê¸‰ë„",
              "displayName": "ê¸´ê¸‰ë„",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ê°ì •",
              "displayName": "ê°ì •",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "23bb3085-e8ec-40c5-b4a1-f1d55b13f4a4",
      "name": "Log to Airtable",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [
        3860,
        40
      ],
      "notesInFlow": true,
      "credentials": {
        "airtableTokenApi": {
          "id": "HdXEjLwjcS4kqWIB",
          "name": "Airtable Personal Access Token account 3"
        }
      },
      "notes": "ğŸŸ¢ Airtable ë¡œê·¸ ì €ì¥\nëª¨ë“  ì²˜ë¦¬ ë‚´ì—­ ê¸°ë¡"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C092VKCHTL5",
          "mode": "list",
          "cachedResultName": "ì´ë©”ì¼-ìë™í™”"
        },
        "text": "={{ $json.output }}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        2360,
        200
      ],
      "id": "8ef70117-ec6f-4ea8-a197-5f96a817bd54",
      "name": "Slack1",
      "webhookId": "f971cf24-ed77-4fbe-8355-60bbb897efef",
      "credentials": {
        "slackOAuth2Api": {
          "id": "sm4OLhx5v8NKi3qD",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "mode": "combine",
        "fieldsToMatchString": "ok",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        3560,
        40
      ],
      "id": "0335f769-960c-4dbf-90e6-c29e020ac03b",
      "name": "Merge"
    }
  ],
  "pinData": {},
  "connections": {
    "Get Email Details": {
      "main": [
        [
          {
            "node": "Parse Email Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Email Data": {
      "main": [
        [
          {
            "node": "AI Email Analyzer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Email Analyzer": {
      "main": [
        [
          {
            "node": "Merge & Strategy",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Email Analyzer",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "JSON Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Email Analyzer",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Merge & Strategy": {
      "main": [
        [
          {
            "node": "Check Reply Needed",
            "type": "main",
            "index": 0
          },
          {
            "node": "Check Urgency",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Reply Needed": {
      "main": [
        [
          {
            "node": "Get Template from Airtable",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Get Template from Airtable": {
      "main": [
        [
          {
            "node": "AI Reply Writer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Reply Writer": {
      "main": [
        [
          {
            "node": "Create Gmail Draft",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model 2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Reply Writer",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Create Gmail Draft": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Urgency": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail Trigger": {
      "main": [
        [
          {
            "node": "Get Email Details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Reply Writer",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Slack": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Slack",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Slack1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Log to Airtable": {
      "main": [
        [
          {
            "node": "Mark as Read",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slack1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Log to Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a5b5ec70-2a1c-4947-8768-ce6f592af6db",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "6584c3ee4a1bba8a530380aa4465cf16feecea86d0c373cc0dd44d8c1497f81e"
  },
  "id": "R0JRWz9LLj9jvO9A",
  "tags": [
    {
      "createdAt": "2025-06-16T02:46:07.116Z",
      "updatedAt": "2025-06-16T02:46:07.116Z",
      "id": "5MkdT85YN1GVRZnz",
      "name": "ì´ë©”ì¼ìë™í™”"
    },
    {
      "createdAt": "2025-06-16T02:46:07.164Z",
      "updatedAt": "2025-06-16T02:46:07.164Z",
      "id": "Icz1SXfm7tZ6OtAj",
      "name": "AIì—ì´ì „íŠ¸"
    },
    {
      "createdAt": "2025-06-16T02:46:07.142Z",
      "updatedAt": "2025-06-16T02:46:07.142Z",
      "id": "RbFpnQ9gtWCpLyIv",
      "name": "Airtable"
    },
    {
      "createdAt": "2025-06-16T02:46:07.189Z",
      "updatedAt": "2025-06-16T02:46:07.189Z",
      "id": "RcelhEOyFgvq1dFZ",
      "name": "Gmailì—°ë™"
    }
  ]
}